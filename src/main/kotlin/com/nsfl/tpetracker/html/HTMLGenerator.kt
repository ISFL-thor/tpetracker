package com.nsfl.tpetracker.html

import com.nsfl.tpetracker.model.player.Player
import com.nsfl.tpetracker.model.team.Team

private const val INDEX_HTML = "<!DOCTYPE html><html><head><title>TPE Tracker</title><link rel=\"stylesheet\" type=\"text/css\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\"><script type=\"text/javascript\" language=\"javascript\" src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js\"></script></head><body><br><br><div class=\"container\"><div class=\"row\"><div class=\"col-xl-6 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/all_players';\"><div class=\"card border-0 shadow\"><img src=\"\" class=\"card-img-top\"><div class=\"card-body text-center\"><br><h5 class=\"card-title mb-0\">All Players</h5><br></div></div></div><div class=\"col-xl-6 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/team_stats';\"><div class=\"card border-0 shadow\"><img src=\"\" class=\"card-img-top\"><div class=\"card-body text-center\"><br><h5 class=\"card-title mb-0\">Team Stats</h5><br></div></div></div></div></div><br><div class=\"container\"><div class=\"row\"><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/baltimore_hawks';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/V7b1IrD.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Baltimore Hawks</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/colorado_yeti';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/F82SkOe.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Colorado Yeti</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/philadelphia_liberty';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/e26kJIj.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Philadelphia Liberty</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/yellowknife_wraiths';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/HTNIYcS.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Yellowknife Wraiths</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/arizona_outlaws';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/Run36h3.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Arizona Outlaws</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/new_orleans_second_line';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/39Pv6j6.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">New Orleans Second Line</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/orange_county_otters';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/A1jDLTx.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Orange County Otters</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/san_jose_sabercats';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/WKAzCvY.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">San Jose SaberCats</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='https://www.youtube.com/watch?v=dQw4w9WgXcQ';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/A0LezPb.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Washington Admirals</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='https://www.youtube.com/watch?v=dQw4w9WgXcQ';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/A0LezPb.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Honolulu Islanders</h5></div></div></div></div></div><br><div class=\"container\"><div class=\"row\"><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/palm_beach_solar_bears';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/FW3Ewsh.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Palm Beach Solar Bears</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/kansas_city_coyotes';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/8ZFoMpk.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Kansas City Coyotes</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/portland_pythons';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/g1jBrkG.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Portland Pythons</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/norfolk_seawolves';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/rUbmsUh.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Norfolk SeaWolves</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/san_antonio_marshals';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/FL05wyS.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">San Antonio Marshals</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/tijuana_luchadores';\"><div class=\"card border-0 shadow\"><img src=\"https://i.imgur.com/Rqa9DsX.png\" class=\"card-img-top\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Tijuana Luchadores</h5></div></div></div></div></div><br><div class=\"container\"><div class=\"row\"><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/free_agents';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">Free Agents</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/qb_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">QB Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/rb_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">RB Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/wr_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">WR Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/te_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">TE Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/ol_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">OL Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/de_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">DE Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/dt_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">DT Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/lb_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">LB Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/cb_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">CB Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/s_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">S Prospects</h5></div></div></div><div class=\"col-xl-4 col-md-6 mb-4\" style=\"cursor:pointer\" onclick=\"window.location='/kp_prospects';\"><div class=\"card border-0 shadow\"><div class=\"card-body text-center\"><h5 class=\"card-title mb-0\">K/P Prospects</h5></div></div></div></div></div><br><br></body></html>"
private const val ALL_PLAYERS_HTML = "<!DOCTYPE html><html><head><title>%s</title><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.10.19/css/dataTables.semanticui.min.css\"><script type=\"text/javascript\" language=\"javascript\" src=\"https://code.jquery.com/jquery-3.3.1.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.19/js/dataTables.semanticui.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js\"></script><script type=\"text/javascript\" class=\"init\">var dataSet=[%s];\$(document).ready(function(){\$('#table').DataTable({paging:false,order: [[4, \"desc\"]],data:dataSet,columns:[{ title: 'Draft Year' }, { title: 'Team' }, { title: 'Name' }, { title: 'Position' }, { title: 'TPE' }]})});</script><style>div{padding-left: 5%%; padding-right: 5%%; padding-top: 0.5%%; padding-bottom: 0.5%%;}</style></head><body><div><table id=\"table\" class=\"ui celled table\" width=\"100%%\"></table></div></body></html>"
private const val TEAM_STATS_HTML = "<!DOCTYPE html><html><head><title>%s</title><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.10.19/css/dataTables.semanticui.min.css\"><script type=\"text/javascript\" language=\"javascript\" src=\"https://code.jquery.com/jquery-3.3.1.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.19/js/dataTables.semanticui.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js\"></script><script type=\"text/javascript\" class=\"init\">var dataSet=[%s];\$(document).ready(function(){\$('#table').DataTable({paging:false,order: [[0, \"desc\"]],data:dataSet,columns:[{ title: 'League' }, { title: 'Name' }, { title: 'Total TPE' }, { title: 'Total Effective TPE' }, { title: 'Average TPE' }]})});</script><style>div{padding-left: 5%%; padding-right: 5%%; padding-top: 0.5%%; padding-bottom: 0.5%%;}</style></head><body><div><table id=\"table\" class=\"ui celled table\" width=\"100%%\"></table></div></body></html>"
private const val INDIVIDUAL_TEAM_HTML = "<!DOCTYPE html><html><head><title>%s</title><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.10.19/css/dataTables.semanticui.min.css\"><script type=\"text/javascript\" language=\"javascript\" src=\"https://code.jquery.com/jquery-3.3.1.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdn.datatables.net/1.10.19/js/dataTables.semanticui.min.js\"></script><script type=\"text/javascript\" language=\"javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.js\"></script><script type=\"text/javascript\" class=\"init\">var dataSet=[%s];\$(document).ready(function(){\$('#table').DataTable({paging:false,order: [[3, \"desc\"]],data:dataSet,columns:[{ title: 'Draft Year' }, { title: 'Name' }, { title: 'Position' }, { title: 'TPE' }]})});</script><style>div{padding-left: 5%%; padding-right: 5%%; padding-top: 0.5%%; padding-bottom: 0.5%%;}caption{padding-bottom: 30px; font-size: 30px}</style></head><body><div><table id=\"table\" class=\"ui celled table\" width=\"100%%\"><caption>%s</caption></table></div></body></html>"

class HTMLGenerator {

    fun createIndex() = INDEX_HTML

    fun createAllPlayers(
            playerList: List<Player>
    ) = ALL_PLAYERS_HTML.format(
            "All Players",
            playerList.joinToString(",") {
                "['${it.draftYear}','<a href=\"${it.team.url}\">${it.team.full}</a>','<a href=\"http://nsfl.jcink.net/index.php?showtopic=${it.id}\">${it.name}</a>','${it.position.full}','${it.tpe}']"
            }
    )

    fun createTeamStats(
            nsflList: List<Pair<Team, List<Player>>>,
            dsflList: List<Pair<Team, List<Player>>>
    ) = TEAM_STATS_HTML.format(
            "Team Stats",
            nsflList.joinToString(",") { pair ->
                val totalTPE = pair.second.sumBy { it.tpe }
                "['NSFL','<a href=\"${pair.first.url}\">${pair.first.full}</a>','$totalTPE','$totalTPE','${totalTPE / pair.second.size}']"
            } + "," + dsflList.joinToString(",") { pair ->
                val totalTPE = pair.second.sumBy { it.tpe }
                val totalEffectiveTPE = pair.second.sumBy { if (it.tpe > 250) 250 else it.tpe }
                "['DSFL','<a href=\"${pair.first.url}\">${pair.first.full}</a>','$totalTPE','$totalEffectiveTPE','${totalTPE / pair.second.size}']"
            }
    )

    fun createTeam(
            team: Team,
            playerList: List<Player>
    ) = INDIVIDUAL_TEAM_HTML.format(
            team.full,
            playerList.joinToString(",") {
                "['${it.draftYear}','<a href=\"http://nsfl.jcink.net/index.php?showtopic=${it.id}\">${it.name}</a>','${it.position.full}','${it.tpe}']"
            },
            team.full
    )
}